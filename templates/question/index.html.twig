{% extends 'base.html.twig' %}

{% block title %}Hello QuestionController!
{% endblock %}

{% block body %}
	<style>
		.inquiry-result p.lead {
			color: white;
		}
	</style>
	<div class="row justify-content-center mb-5">
		<div class="col-lg-12">
			<h1 class="display-1  text-white">Avec Licorne
				<span>D√©fiscalisez simplement !</span>
			</h1>

			{% if not result %}
				<p class="lead text-white">En quelques questions, Licorne d√©mystifie la complexit√© du dispositif Pinel et vous donne m√™me son avis sur son efficacit√© par rapport √† votre situation actuelle !</p>
			{% endif %}
		</div>
	</div>
	<div class="row">
		<div class="col-lg-12">

			{% if result %}
				<div class="inquiry-result">
					<p class="lead">
						{{ result.inquiry.city.name}}
						se situant en Zone
						{{result.inquiry.city.zone}}, vous pourriez louer votre bien de
						{{ result.inquiry.surface}}m¬≤ pour un loyer maximal de
						<strong>{{result.maxPrice | round}}
							‚Ç¨ / mois !</strong>
					</p>

					{% set className = result.sixYears.rate >= 50 ? "success" : "warning" %}

					<div class="alert alert-{{className}}">
						<h4 class="text-white mt-3">
							{% if result.sixYears.rate >= 75 %}
								üëèüéâ Bravo ! Avec une r√©duction d'impots de
								{{ result.sixYears.rate | round(2)}}%, nous ne pouvons que vous encourager pour ce projet !
							{% elseif result.sixYears.rate >= 50 %}
								üëèüéâ Wow ! La r√©duction d'impots serait de
								{{ result.sixYears.rate | round(2) }}%, c'est une r√©duction substentielle mais on peut encore affiner !
							{% else %}
								üòø A√Øe, la r√©duction de
								{{ result.sixYears.rate | round(2) }}% ne nous semble pas assez significative, on pourrait revoir votre projet ?
							{% endif %}
						</h4>

						<div class="btn-wrapper mt-4">
							<a href="#" class="btn btn-primary btn-icon mb-3 mb-sm-0 btn-lg">
								<span class="btn-inner--icon">
									<i class="fa fa-phone"></i>
								</span>
								<span class="btn-inner--text">On s'appelle !</span>
							</a>
							<a href="{{ path('defiscalisation_form') }}" class="btn btn-white btn-icon mb-3 mb-sm-0 btn-lg">
								<span class="btn-inner--icon">
									<i class="fa fa-undo"></i>
								</span>
								<span class="btn-inner--text">Refaire la simulation</span>
							</a>
						</div>
					</div>

					<p class="lead pb-5">
						La loi Pinel vous permet de r√©duire vos imp√¥ts sur 6, 9 ou 12 ans ! Vous h√©sitez sur la dur√©e ? Pas de panique, vous pouvez commencer par une des deux dur√©es inf√©rieures √† 12 ans et d√©cider de prolonger par la suite.
					</p>
				</div>
			</div>
		</div>

		<div class="row row-grid">
			<div class="col-lg-6">
				<div class="card card-lift--hover shadow border-0">
					<div class="card-body py-5">
						<h6 class="text-primary text-uppercase">Engagement de 6 ans</h6>
						<p class="mt-3">En vous engageant sur 6 ans, en prenant pour r√©f√©rence
							{{ result.inquiry.taxesAvg }}
							‚Ç¨ d'impots par an,
							<strong class="text-primary">vous ne payeriez plus
								{{ result.sixYears.finalTaxes == 0 ? " d'impots du tout" : "  que "~result.sixYears.finalTaxes~" ‚Ç¨ d'impots par an" }}
								!</strong>
						</p>

						<div>
							<p>La r√©duction d'impots maximum pour ce bien est de
								<span class="badge badge-pill badge-primary">{{result.sixYears.amount}}
									‚Ç¨ sur 6 ans</span>
								soit
								<span class="badge badge-pill badge-primary">{{result.sixYears.amountPerYear}}
									‚Ç¨ par an</span>
							</p>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="card card-lift--hover shadow border-0">
					<div class="card-body py-5">
						<h6 class="text-success text-uppercase">Engagement de 9 ans</h6>
						<p class="mt-3">En vous engageant sur 9 ans, en prenant pour r√©f√©rence
							{{ result.inquiry.taxesAvg }}
							‚Ç¨ d'impots par an,
							<strong class="text-success">vous ne payeriez plus
								{{ result.nineYears.finalTaxes == 0 ? " d'impots du tout" : "  que "~result.nineYears.finalTaxes~" ‚Ç¨ d'impots par an" }}
								!</strong>
						</p>
						<div>
							<p>La r√©duction d'impots maximum pour ce bien est de
								<span class="badge badge-pill badge-success">{{result.nineYears.amount}}
									‚Ç¨ sur 9 ans</span>, soit
								<span class="badge badge-pill badge-success">{{result.nineYears.amountPerYear}}
									‚Ç¨ par an</span>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row mt-5">
			<div class="col-lg-6">
				<div class="card card-lift--hover shadow border-0">
					<div class="card-body py-5">
						<h6 class="text-warning text-uppercase">Engagement de 12 ans (les 9 premi√®res ann√©es)</h6>
						<p class="mt-3">En vous engageant sur 12 ans, en prenant pour r√©f√©rence
							{{ result.inquiry.taxesAvg }}
							‚Ç¨ d'impots par an,
							<strong class="text-warning">vous ne payeriez plus
								{{ result.twelveYearsFirstNine.finalTaxes == 0 ? " d'impots du tout" : "  que "~result.twelveYearsFirstNine.finalTaxes~" ‚Ç¨ d'impots par an" }}
								les 9 premi√®res ann√©es !</strong>
						</p>
						<div>
							<p>La r√©duction d'impots maximum pour ce bien est de
								<span class="badge badge-pill badge-warning">{{result.twelveYearsFirstNine.amount}}
									‚Ç¨ sur 9 ans</span>, soit
								<span class="badge badge-pill badge-warning">{{result.twelveYearsFirstNine.amountPerYear}}
									‚Ç¨ par an</span>
							</p>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-6">
				<div class="card card-lift--hover shadow border-0">
					<div class="card-body py-5">
						<h6 class="text-warning text-uppercase">Engagement de 12 ans (les 3 derni√®res ann√©es)</h6>
						<p class="mt-3">En vous engageant sur 12 ans, en prenant pour r√©f√©rence
							{{ result.inquiry.taxesAvg }}
							‚Ç¨ d'impots par an,
							<strong class="text-warning">vous ne payeriez plus
								{{ result.twelveYearsLastThree.finalTaxes == 0 ? " d'impots du tout" : "  que "~result.twelveYearsLastThree.finalTaxes~" ‚Ç¨ d'impots par an" }}
								les 3 derni√®res ann√©es !</strong>
						</p>
						<div>
							<p>La r√©duction d'impots maximum pour ce bien est de
								<span class="badge badge-pill badge-warning">{{result.twelveYearsLastThree.amount}}
									‚Ç¨ sur 3 ans</span>, soit
								<span class="badge badge-pill badge-warning">{{result.twelveYearsLastThree.amountPerYear}}
									‚Ç¨ par an</span>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div class="alert alert-danger mt-5">
			<p>
				<strong>Attention ! Les locataires devraient respecter ces limites de revenus :
				</strong>
			</p>
			<ul>
				<li>Personne seule :
					<strong>{{ result.inquiry.city.alone }}</strong>
				</li>

				<li>Couple :
					<strong>{{ result.inquiry.city.couple }}
						‚Ç¨</strong>
				</li>

				<li>Personne seule ou couple avec une personne √† charge :
					<strong>{{ result.inquiry.city.withOne }}
						‚Ç¨</strong>
				</li>
				<li>Personne seule ou couple avec deux personnes √† charge :
					<strong>{{ result.inquiry.city.withTwo }}
						‚Ç¨</strong>
				</li>

				<li>Personne seule ou couple avec trois personnes √† charge :
					<strong>{{ result.inquiry.city.withThree }}
						‚Ç¨</strong>
				</li>

				<li>Personne seule ou couple avec quatre personnes √† charge :
					<strong>{{ result.inquiry.city.withFour }}
						‚Ç¨</strong>
				</li>

			</ul>
		</div>
	</div>
{% else %}

	{{ form_start(form) }}

	<p class="lead  text-white">Tout d'abord, dans quelle commune / ville souhaitez vous investir ?</p>
	{{ form_row(form.city, {'label': false}) }}

	<p class="lead  text-white">Quel est le montant que vous pourriez investir ?</p>
	{{ form_row(form.value, {'label': false})}}

	<p class="lead  text-white">Quelle sera la surface du bien que vous recherchez (en m¬≤) ?</p>
	{{ form_row(form.surface, {'label': false})}}

	<p class="lead  text-white">Un peu de calcul : quelle somme d'impots payez vous chaque ann√©e (prenez la moyenne des 3 derni√®res ann√©es) ?</p>
	{{ form_row(form.taxesAvg, {'label': false})}}

	<button type="submit" class="btn btn-icon btn-success btn-lg">
		<span class="btn-inner--icon">
			<i class="ni ni-check-bold"></i>
		</span>
		<span class="btn-inner--text">Lancer la simulation</span>
	</button>

	{{ form_end(form, {'rest': false}) }}

{% endif %}</div></div>{% endblock %}
